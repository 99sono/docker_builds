# Simplified Docker Compose template for the final assembled development image (Layer 04)
#
# Purpose:
# - Illustrative template showing how to run the dev environment image built by this stack.
# - Focuses solely on launching the dev environment container, without extra services.
#
# How to use:
# - Replace the 'image' value with your assembled image tag (typically from Layer 04).
# - Provide API keys via environment variables if you plan to use coding agents that require them.
# - This template is minimal by design and intended as a starting point.

version: "3.9"

services:
  dev:
    # Replace this with your final assembled image reference (built from Layer 04).
    # Example after building layer 04:
    #   development-level04-project-stubs:1.0.0
    image: development-level04-project-stubs:${IMAGE_VERSION:-1.0.0}

    container_name: dev-environment
    # Map SSH for remote access to the container if needed (inherited entrypoint runs sshd)
    ports:
      - "2222:22"

    # Persist a workspace directory if you want source code to live on the host
    # volumes:
    #   - ./workspace:/home/developer/workspace

    # API keys for coding agents (optional). These are NOT required to run the container.
    # Set these in your host shell or an .env file; the defaults here are empty strings.
    environment:
      OPENROUTER_API_KEY: ${OPENROUTER_API_KEY:-}
      GEMINI_API_KEY: ${GEMINI_API_KEY:-}

    # Keep the container running using the inherited entrypoint from the image.
    # You can override command if you need a different behavior:
    # command: ["sleep", "infinity"]

    # Uncomment if you want TTY/interactive defaults for development usage
    # tty: true
    # stdin_open: true
